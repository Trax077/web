<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Radek Volf – kontaktní formulář. Zprávy jsou doručeny rovnou do e-mailu.">
  <title>Radek Volf</title>
  <style>
    :root{
      --bg:#000000; --fg:#00ff66; --muted:#25a35a; --card:#0a0a0a; --border:#0f3d26; --accent:#00ff66;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
      background:var(--bg); color:var(--fg); margin:0; padding:24px;
    }
    .wrap{
      max-width:920px; margin:0 auto; background:var(--card);
      border:1px solid var(--border); border-radius:12px; padding:24px;
    }
    h1{margin:0 0 12px; font-size:26px; line-height:1.25}
    h2{margin:24px 0 8px; font-size:18px}
    p.hint{color:var(--muted); margin-top:0}
    label{display:block; margin:12px 0 6px}
    input,textarea{
      width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:8px; background:#030303; color:var(--fg);
      outline:none;
    }
    textarea{min-height:140px; resize:vertical}
    .row{display:flex; gap:12px; flex-wrap:wrap}
    .row > div{flex:1 1 240px}
    .actions{display:flex; align-items:center; justify-content:space-between; margin-top:14px; gap:12px; flex-wrap:wrap}
    button{
      border:1px solid var(--accent); border-radius:10px; padding:12px 16px; cursor:pointer; font-weight:700;
      background:#001a0f; color:var(--fg);
    }
    button[type=submit]{background:#00331f}
    .small{font-size:13px; color:var(--muted)}
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    .hp{position:absolute; left:-9999px; opacity:0; height:0; width:0; overflow:hidden}
    .required{color:var(--accent)}
    .lang-switch{display:flex; gap:8px; margin-bottom:10px}
    .lang-switch button{background:#00110a; border:1px solid var(--border); border-radius:8px; padding:6px 10px; color:var(--fg); cursor:pointer}
    .lang-switch button.active{border-color:var(--accent)}
    .footer{margin-top:18px; color:var(--muted); font-size:12px}
    .checkbox{display:flex; align-items:center; gap:8px; margin-top:12px;}
    .checkbox input[type="checkbox"]{width:auto; height:auto; accent-color:#00ff66;}

    /* tabulky */
    .table-wrap{overflow-x:auto; border:1px solid var(--border); border-radius:8px}
    table{width:100%; border-collapse:collapse; min-width:420px}
    thead{background:#071a12}
    th, td{padding:10px 12px; border-bottom:1px solid var(--border); text-align:left; vertical-align:top}
    th{font-weight:700}
    tr:last-child td{border-bottom:0}
    .mono{font-family:inherit; word-break:break-word}
    .right{text-align:right}
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <div class="lang-switch" aria-label="Language switch">
      <button type="button" id="btn-cs" class="active" aria-pressed="true">Čeština</button>
      <button type="button" id="btn-en" aria-pressed="false">English</button>
    </div>

    <h1 data-i18n="title">Radek Volf – kontaktní formulář</h1>
    <p class="hint" data-i18n="subtitle">Nech vzkaz – přijde mi rovnou do e-mailu.</p>

    <!-- FORM -->
    <form action="https://formsubmit.co/86ebf25c9a4f010e50f748d5181b495a" method="POST" aria-label="Contact form">
      <input type="hidden" name="_subject" value="Nová zpráva z kontaktního formuláře" />
      <input type="hidden" name="_template" value="table" />
      <input type="hidden" name="_captcha" value="true" />
      <input type="hidden" name="_next" value="https://trax077.github.io/webthanks.html" />

      <!-- Honeypot -->
      <div class="hp" aria-hidden="true">
        <label>Leave empty: <input type="text" name="_honey" tabindex="-1" autocomplete="off" /></label>
      </div>

      <div class="row">
        <div>
          <label for="name"><span data-i18n="label_name">Jméno</span> <span class="required">*</span></label>
          <input id="name" name="name" type="text" required minlength="2" maxlength="80" autocomplete="name" aria-required="true" />
        </div>
        <div>
          <label for="email"><span data-i18n="label_email">E-mail (pro odpověď)</span></label>
          <input id="email" name="email" type="email" inputmode="email" autocomplete="email" placeholder="" aria-describedby="emailHelp" />
          <div id="emailHelp" class="small" data-i18n="email_hint">Volitelné. Slouží jen k odpovědi na vaši zprávu.</div>
        </div>
      </div>

      <label for="message"><span data-i18n="label_message">Zpráva</span> <span class="required">*</span></label>
      <textarea id="message" name="message" required minlength="5" maxlength="5000" aria-required="true"></textarea>

      <div class="checkbox">
        <input type="checkbox" id="gdpr" required aria-required="true" />
        <label for="gdpr" class="small" data-i18n="gdpr">
          Souhlasím se zpracováním odeslaných údajů za účelem zobrazení/odpovědi.
        </label>
      </div>

      <div class="actions">
        <button type="reset" data-i18n="btn_reset">Vymazat</button>
        <button type="submit" data-i18n="btn_submit">Odeslat zprávu</button>
      </div>
    </form>

    <!-- DOWNLOADS -->
    <h2 data-i18n="downloads_title">Ke stažení</h2>
    <p id="downloads-hint" class="small" style="color:var(--muted)" data-i18n="downloads_hint">
      Soubory se načítají automaticky z adresáře <span class="mono">/downloads</span>.
    </p>
    <div class="table-wrap" id="downloads-wrap">
      <table aria-describedby="downloads-hint">
        <thead>
          <tr>
            <th data-i18n="th_name">Název</th>
            <th class="right" data-i18n="th_size">Velikost</th>
          </tr>
        </thead>
        <tbody id="downloads-body">
          <tr><td colspan="2" class="small" style="color:var(--muted)" data-i18n="loading">Načítám…</td></tr>
        </tbody>
      </table>
    </div>
    <p class="small">
      <span data-i18n="browse_github">Prohlédnout ve webovém rozhraní GitHubu:</span>
      <a href="https://github.com/Trax077/web/tree/main/downloads" target="_blank" rel="noopener">/downloads</a>
    </p>

    <!-- LINKS -->
    <h2 data-i18n="links_title">Odkazy</h2>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th data-i18n="th_label">Popis</th>
            <th data-i18n="th_url">URL</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="mono" data-i18n="link_home_label">Web (GitHub Pages)</td>
            <td><a href="https://trax077.github.io/web" target="_blank" rel="noopener">https://trax077.github.io/web</a></td>
          </tr>
          <tr>
            <td class="mono" data-i18n="link_steam_label">Steam: Universe Has No Favorites</td>
            <td><a href="https://store.steampowered.com/app/2625600/Universe_Has_No_Favorites" target="_blank" rel="noopener">store.steampowered.com/app/2625600/…</a></td>
          </tr>
          <tr>
            <td class="mono" data-i18n="link_walker_label">Walker & Volf</td>
            <td><a href="https://www.walkeravolf.cz/" target="_blank" rel="noopener">https://www.walkeravolf.cz/</a></td>
          </tr>
          <tr>
            <td class="mono" data-i18n="link_youtube_label">YouTube kanál</td>
            <td><a href="https://www.youtube.com/@RadekVolf" target="_blank" rel="noopener">https://www.youtube.com/@RadekVolf</a></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="footer">
      <span data-i18n="footer">Běží na GitHub Pages · Odesílání zajišťuje FormSubmit.</span>
    </div>
  </div>

  <script>
    // Jednoduché i18n (CZ/EN)
    const dict = {
      cs: {
        title: "Radek Volf – kontaktní formulář",
        subtitle: "Nech vzkaz – přijde mi rovnou do e-mailu.",
        label_name: "Jméno",
        label_email: "E-mail (pro odpověď)",
        email_hint: "Volitelné. Slouží jen k odpovědi na vaši zprávu.",
        label_message: "Zpráva",
        gdpr: "Souhlasím se zpracováním odeslaných údajů za účelem zobrazení/odpovědi.",
        btn_reset: "Vymazat",
        btn_submit: "Odeslat zprávu",
        footer: "Běží na GitHub Pages · Odesílání zajišťuje FormSubmit.",
        downloads_title: "Ke stažení",
        downloads_hint: "Soubory se načítají automaticky z adresáře <span class=\"mono\">/downloads</span>.",
        th_name: "Název",
        th_size: "Velikost",
        loading: "Načítám…",
        browse_github: "Prohlédnout ve webovém rozhraní GitHubu:",
        links_title: "Odkazy",
        th_label: "Popis",
        th_url: "URL",
        link_home_label: "Web (GitHub Pages)",
        link_steam_label: "Steam: Universe Has No Favorites",
        link_walker_label: "Walker & Volf",
        link_youtube_label: "YouTube kanál"
      },
      en: {
        title: "Radek Volf — Contact Form",
        subtitle: "Leave a message — it will arrive straight to my email.",
        label_name: "Name",
        label_email: "Email (for reply)",
        email_hint: "Optional. Used only to reply to your message.",
        label_message: "Message",
        gdpr: "I consent to processing my submitted data for displaying/replying purposes.",
        btn_reset: "Clear",
        btn_submit: "Send message",
        footer: "Powered by GitHub Pages · Submission handled by FormSubmit.",
        downloads_title: "Downloads",
        downloads_hint: "Files are loaded automatically from the <span class=\"mono\">/downloads</span> directory.",
        th_name: "Name",
        th_size: "Size",
        loading: "Loading…",
        browse_github: "Browse on GitHub:",
        links_title: "Links",
        th_label: "Label",
        th_url: "URL",
        link_home_label: "Website (GitHub Pages)",
        link_steam_label: "Steam: Universe Has No Favorites",
        link_walker_label: "Walker & Volf",
        link_youtube_label: "YouTube channel"
      }
    };

    const els = document.querySelectorAll("[data-i18n]");
    const btnCs = document.getElementById("btn-cs");
    const btnEn = document.getElementById("btn-en");

    function setLang(lang){
      document.documentElement.lang = lang;
      els.forEach(el => {
        const key = el.getAttribute("data-i18n");
        // downloads_hint obsahuje HTML -> použijeme innerHTML
        if (key === "downloads_hint") {
          el.innerHTML = dict[lang][key];
        } else {
          el.textContent = dict[lang][key] || el.textContent;
        }
      });
      btnCs.classList.toggle("active", lang === "cs");
      btnEn.classList.toggle("active", lang === "en");
      btnCs.setAttribute("aria-pressed", lang === "cs");
      btnEn.setAttribute("aria-pressed", lang === "en");
      const email = document.getElementById("email");
      if(email){ email.placeholder = lang === "cs" ? "volitelné" : "optional"; }
      renderDownloads(lang);
    }

    btnCs.addEventListener("click", () => setLang("cs"));
    btnEn.addEventListener("click", () => setLang("en"));

    // ---- Downloads loader (GitHub API) ----
    const GH_OWNER = "Trax077";
    const GH_REPO  = "web";
    const GH_PATH  = "downloads";
    const GH_REF   = "main"; // větev, ze které běží GitHub Pages
    const PAGES_BASE = "https://trax077.github.io/web";

    async function fetchDownloads(){
      const api = `https://api.github.com/repos/${GH_OWNER}/${GH_REPO}/contents/${GH_PATH}?ref=${GH_REF}`;
      const res = await fetch(api, {headers:{'Accept':'application/vnd.github+json'}});
      if(!res.ok) throw new Error(`HTTP ${res.status}`);
      /** @type {{name:string,path:string,size:number,download_url:string,type:string}[]} */
      const data = await res.json();
      return data.filter(x => x.type === 'file');
    }

    function humanSize(bytes){
      if(bytes === 0) return "0 B";
      const units = ["B","KB","MB","GB","TB"];
      const i = Math.floor(Math.log(bytes)/Math.log(1024));
      return `${(bytes/Math.pow(1024,i)).toFixed(i ? 1 : 0)} ${units[i]}`;
    }

    function pagesUrlFor(name){
      // odkaz přes GitHub Pages (ne raw)
      return `${PAGES_BASE}/${GH_PATH}/${encodeURIComponent(name)}`;
    }

    function renderDownloads(lang){
      const tbody = document.getElementById("downloads-body");
      if(!tbody || !window.__downloads_cache) return;
      tbody.innerHTML = "";
      window.__downloads_cache.forEach(item=>{
        const tr = document.createElement("tr");

        const tdName = document.createElement("td");
        tdName.className = "mono";
        const a = document.createElement("a");
        a.href = pagesUrlFor(item.name);
        a.target = "_blank";
        a.rel = "noopener";
        a.textContent = item.name;   // pouze klikací název
        tdName.appendChild(a);

        const tdSize = document.createElement("td");
        tdSize.className = "right";
        tdSize.textContent = humanSize(item.size);

        tr.append(tdName, tdSize);
        tbody.appendChild(tr);
      });

      if(window.__downloads_cache.length === 0){
        tbody.innerHTML = `<tr><td colspan="2" class="small" style="color:var(--muted)">—</td></tr>`;
      }
    }

    async function initDownloads(){
      const tbody = document.getElementById("downloads-body");
      try{
        const items = await fetchDownloads();
        window.__downloads_cache = items;
        renderDownloads(document.documentElement.lang || "cs");
      }catch(err){
        tbody.innerHTML = `<tr><td colspan="2" class="small" style="color:var(--muted)">⚠ ${err}</td></tr>`;
      }
    }

    // Start v češtině + načtení souborů
    setLang("cs");
    initDownloads();
  </script>
</body>
</html>
